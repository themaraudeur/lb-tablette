import{r as v,j as e,I as V,u as p,a as i,F as P,L as s,S as t,c as $,C as W,b as C,d as j,e as Y,f as z,g as M,h as G,i as w,D as q,k as b,M as K,l as Z,m as _,n as U,o as L,p as x,q as B,s as k,T as J,t as X,v as Q,w as ee,x as F,y as ae,z as se,A as ne,B as ie,E as te,G as le,H as ce,J as O,K as re,N as oe,O as H,P as de}from"./index-BmPcK3sZ.js";function y(a){const[l,S]=v.useState(a.value),[r,c]=v.useState(D(l,a.min,a.max));return e(V,{type:"range",className:"sliderInput",min:a.min,max:a.max,defaultValue:l,step:a.step,onChange:m=>{let d=parseFloat(m.target.value);S(d),a.onChange(d),c(D(parseFloat(m.target.value),a.min,a.max))},style:{background:`linear-gradient(to right, #0a84ff 0%, #0a84ff ${r}%, #636366 ${r}%, #636366 100%)`}})}function D(a,l,S,r){var c=(a-l)*100/(S-l);return c>100?c=100:c<0&&(c=0),c}function Se(){const a=p(t),l=p(q),S=["#39334d","#465281","#87855e","#4b6a45","#702e2e","picker"];return i(P,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.APPEARANCE")}),i("section",{children:[e("div",{className:"settings-item",children:e("div",{className:"appearance-container",children:e("div",{className:"appearance-switches",children:["light","dark"].map((r,c)=>i("div",{className:"mode",onClick:()=>t.set({...t.value,display:{...a.display,theme:r}}),children:[e("img",{src:`./assets/img/${r}-mode-placeholder.png`,alt:"Theme"}),e("div",{className:"mode-text",children:$(r)}),e(W,{checked:a.display.theme===r})]},c))})})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{t.set({...t.value,display:{...a.display,automatic:!a.display.automatic}})}})})]})]}),e("div",{className:"category-title",children:s("APPS.SETTINGS.BRIGHTNESS")}),e("section",{children:i("div",{className:"settings-item",children:[e(j,{}),e(y,{onChange:r=>t.set({...t.value,display:{...a.display,brightness:r}}),value:a.display.brightness,min:.1,max:1,step:.01}),e(Y,{})]})}),e("div",{className:"category-title",children:s("APPS.SETTINGS.TABLET_SCALE")}),e("section",{children:i("div",{className:"settings-item",children:[e(z,{}),e(y,{onChange:r=>{l||t.set({...t.value,display:{...a.display,size:r}})},value:a.display.size??1,min:.8,max:1.4,step:.1}),e(M,{})]})}),G.value.AllowFrameColorChange&&i(P,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.FRAME_COLOR")}),e("section",{children:e("div",{className:"settings-item",children:e("div",{className:"colors",children:S.map((r,c)=>{let m=r==="picker";return e("div",{className:"color",style:{backgroundImage:m&&"url(./assets/img/icons/picker.png)",boxShadow:!m&&`inset 0 0.1rem 5rem ${r}, 0 0 0 0.15rem hsl(254, 30%, 85%)`},"data-active":a.display.frameColor===r,onClick:()=>{if(m){w.ColorPicker.set({onSelect:d=>{t.set({...t.value,display:{...a.display,frameColor:d}})}});return}else t.set({...t.value,display:{...a.display,frameColor:r}})}},c)})})})})]})]})}function me(){const a=p(t);return i(P,{children:[e("div",{className:"category-title",children:"Software Update"}),e("section",{children:i("div",{className:"settings-item",style:{cursor:"pointer"},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.AUTOMATIC_UPDATES")})}),e("div",{className:"setting-value",children:e("div",{className:"value",children:s("APPS.SETTINGS.OFF")})})]})}),a.version!==a.latestVersion&&e("section",{children:i("div",{className:"settings-item",style:{flexDirection:"column",alignItems:"inherit",gap:"0.75rem"},children:[i("div",{className:"item-header",children:[e("img",{src:"./assets/img/icons/lbos.webp"}),i("div",{className:"info",children:[e("div",{className:"title",children:a.latestVersion}),e("div",{className:"author",children:e(ue,{})})]})]}),e("div",{className:"item-content",children:"Please tell your server owner to update the tablet to the latest version."})]})}),a.version===a.latestVersion&&i("div",{className:"up-to-date",children:[i("div",{className:"version",children:["V ",a==null?void 0:a.version]}),e("div",{className:"title",children:s("APPS.SETTINGS.UP_TO_DATE")})]})]})}const ue=()=>{const a="abcdefghijklmnopqrstuvwxyz".split("");return i(P,{children:[a[11].toUpperCase(),a[1].toUpperCase()]})};function Ne({type:a}){return i(P,{children:[e("div",{style:{marginTop:"0.5rem"}}),e("section",{children:a==="Language"&&e(ve,{})})]})}const ve=()=>{const a=p(t),[l,S]=v.useState([]);return v.useEffect(()=>{b("getLocales",null,K).then(r=>{r&&S(r)})},[]),v.useEffect(()=>{Z(a.locale)},[a.locale]),e(P,{children:l.map((r,c)=>e("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>t.set({...t.value,locale:r.locale}),children:i("div",{className:"setting",children:[r.locale===a.locale?e(_,{className:"checkmark"}):e(_,{className:"checkmark hidden"}),e("div",{className:"title",children:r.name})]})},c))})};function he(){var c,m;const a=p(t),l=p(G),[S,r]=v.useState(!1);return U("settings:back",()=>{S&&r(!1)}),e(L.div,{...x(S?"right":"left",S.toString(),.2),className:"settings-content",children:S?i("div",{className:"wallpapers-container",children:[e("div",{className:"wallpaper add",onClick:()=>{var d,h,o;w.Gallery.set({allowExternal:(o=(h=(d=G)==null?void 0:d.value)==null?void 0:h.AllowExternal)==null?void 0:o.Other,onSelect:g=>{t.patch({wallpaper:{...a.wallpaper,background:g.src}})}})},children:e(M,{})}),((c=a.wallpaper)==null?void 0:c.background.includes("http"))&&e("div",{className:"wallpaper active",style:{backgroundImage:`url(${(m=a.wallpaper)==null?void 0:m.background})`}}),Object.keys(l.Wallpapers).map((d,h)=>e(pe,{wallpaper:d,selected:a.wallpaper.background===d,cb:()=>{t.set({...t.value,wallpaper:{...t.value.wallpaper,background:d}})}},h))]}):e(ge,{setExploringWallpapers:r})})}const pe=({wallpaper:a,selected:l,cb:S})=>{const[r,c]=v.useState("");return v.useEffect(()=>{B(a,m=>c(m))},[]),e("div",{className:`wallpaper ${l?"active":""}`,style:{backgroundImage:`url(${r})`},onClick:S})},ge=({setExploringWallpapers:a})=>{var c,m;const l=p(t),[S,r]=v.useState(null);return v.useEffect(()=>{B(l.wallpaper.background,d=>r(d))},[(c=l==null?void 0:l.wallpaper)==null?void 0:c.background]),i("section",{children:[i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{T.set([...T.value,{name:"Wallpapers"}]),a(!0)},children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.CHOOSE_NEW_WALLPAPER")})}),e("div",{className:"setting-value",children:e(k,{className:"chevron"})})]}),e("div",{className:"settings-item",children:i("div",{className:"wallpapers",children:[e("div",{className:"preview",style:{backgroundImage:S&&`url(${S})`},children:e("div",{className:"preview-lockscreen-container",children:e(J,{layout:((m=l==null?void 0:l.lockscreen)==null?void 0:m.layout)??1})})}),e("div",{className:"preview",style:{backgroundImage:S&&`url(${S})`},children:i("div",{className:"preview-homescreen-container",children:[e("div",{className:"preview-homescreen-apps",children:l.apps[1].filter(d=>!X(d)).slice(0,24).map(d=>{var g;let h=G.value.apps[d],o=((g=h==null?void 0:h[d])==null?void 0:g.icon)??`./assets/img/icons/apps/${d}.jpg`;return i("div",{className:"settings-homescreen-app",children:[e("img",{src:o,onError:u=>u.currentTarget.src="./assets/img/icons/apps/unkown.png"}),e("div",{className:"app-name",children:d})]},d)})}),e("div",{className:"favourite-apps",children:l.apps[0].map(d=>e("div",{className:"settings-homescreen-app",children:e("img",{src:`./assets/img/icons/apps/${d}.jpg`})},d))})]})})]})}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.BLUR_HOMESCREEN")})}),e("div",{className:"setting-value",children:e(C,{checked:l.wallpaper.blur,onChange:()=>{t.set({...t.value,wallpaper:{...l.wallpaper,blur:!l.wallpaper.blur}})}})})]})]})};function Te(){var d,h,o,g;const a=p(G),l=p(t),[S,r]=v.useState(!1),[c,m]=v.useState(null);return U("settings:back",()=>{S&&(r(!1),m(null))}),i(L.div,{...x(S?"right":"left",S.toString(),.2),className:"settings-content",children:[e("div",{style:{marginTop:"0.5rem"}}),S?e(P,{children:i("section",{children:[i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.ALLOW_NOTIFICATIONS")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{var u,N,E;t.set({...t.value,notifications:{...l.notifications,[c]:{...(u=l.notifications)==null?void 0:u[c],enabled:!((E=(N=l.notifications)==null?void 0:N[c])!=null&&E.enabled)}}})},checked:((h=(d=l.notifications)==null?void 0:d[c])==null?void 0:h.enabled)??!0})})]}),i("div",{className:"settings-item",children:[e("div",{className:"setting",children:e("div",{className:"title",children:s("APPS.SETTINGS.SOUNDS")})}),e("div",{className:"setting-value",children:e(C,{onChange:()=>{var u,N,E;t.set({...t.value,notifications:{...l.notifications,[c]:{...(u=l.notifications)==null?void 0:u[c],sound:!((E=(N=l.notifications)==null?void 0:N[c])!=null&&E.sound)}}})},checked:((g=(o=l.notifications)==null?void 0:o[c])==null?void 0:g.sound)??!0})})]})]})}):i(P,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.NOTIFICATIONS")}),e("section",{style:{marginBottom:"4rem"},children:Object.keys(a.apps).filter(u=>{var N;return Q(u)||((N=a.apps[u])==null?void 0:N.removable)===!1}).sort((u,N)=>s(`APP_NAMES.${u}`,null,a.apps[u].name).localeCompare(s(`APP_NAMES.${N}`,null,a.apps[N].name))).map((u,N)=>i("div",{className:"settings-item",style:{cursor:"pointer"},onClick:()=>{m(u),r(!0),T.set([...T.value,{name:"Notifications"}])},children:[i("div",{className:"setting",children:[e("img",{src:a.apps[u].icon??`./assets/img/icons/apps/${u}.jpg`}),e("div",{className:"title",children:s(`APP_NAMES.${u}`,null,a.apps[u].name)})]}),e("div",{className:"setting-value",children:e(k,{className:"chevron"})})]},N))})]})]})}function Pe(){const a=p(t);return e(P,{children:i(P,{children:[e("div",{className:"category-title",children:s("APPS.SETTINGS.RINGTONE_VOLUME")}),e("section",{children:i("div",{className:"settings-item",children:[e(ee,{}),e(y,{onChange:l=>{l!==void 0&&t.patch({sound:{...t.value.sound,volume:l}})},value:a.sound.volume!==void 0?a.sound.volume:.5,min:0,max:1,step:.05}),e(F,{})]})})]})})}const Ie=H(null),T=H([]);function Ae(){var E,R;const a=p(t),l=p(de),[S,r]=v.useState(""),[c,m]=v.useState(null),[d,h]=v.useState(null),o=p(T);let g=[[{name:s("APPS.SETTINGS.AIRPLANE_MODE"),description:s("APPS.SETTINGS.AIRPLANE_MODE_DESCRIPTION"),icon:e(ae,{className:"orange"}),switch:!0,value:a.airplaneMode,onChange:()=>{t.set({...t.value,airplaneMode:!a.airplaneMode})}},{name:s("APPS.SETTINGS.STREAMER_MODE"),description:s("APPS.SETTINGS.STREAMER_MODE_DESCRIPTION"),icon:e(se,{className:"purple"}),switch:!0,value:a==null?void 0:a.streamerMode,onChange:()=>{t.set({...t.value,streamerMode:!a.streamerMode})}}],[{name:s("APPS.SETTINGS.NOTIFICATIONS"),description:s("APPS.SETTINGS.NOTIFICATIONS_DESCRIPTION"),icon:e(ne,{className:"red"}),options:e(Te,{})},{name:s("APPS.SETTINGS.SOUND_HAPTICS"),description:s("APPS.SETTINGS.SOUND_HAPTICS_DESCRIPTION"),icon:e(F,{className:"pink"}),options:e(Pe,{})}],[{name:s("APPS.SETTINGS.GENERAL"),description:s("APPS.SETTINGS.GENERAL_DESCRIPTION"),icon:e(ie,{className:"grey"}),options:[[{name:s("APPS.SETTINGS.ABOUT"),options:[[{name:s("APPS.SETTINGS.VERSION"),value:`V${a.version}`},{name:s("APPS.SETTINGS.MODEL_NAME"),value:"LB Tablet"},{name:s("APPS.SETTINGS.SERIAL_NUMBER"),value:"DSDWWWSSF3"},{name:s("APPS.SETTINGS.DEVELOPED_BY"),value:"Breze & Loaf Scripts"},{name:s("APPS.SETTINGS.PURCHASE_AT"),value:"https://lbscripts.com"}],[{name:s("APPS.SETTINGS.SONGS"),value:"0"},{name:s("APPS.SETTINGS.VIDEOS"),value:"0"},{name:s("APPS.SETTINGS.PHOTOS")},{name:s("APPS.SETTINGS.APPLICATIONS")},{name:s("APPS.SETTINGS.CAPACITY")},{name:s("APPS.SETTINGS.AVAILABLE")}]]},{name:s("APPS.SETTINGS.SOFTWARE_UPDATE"),options:e(me,{}),notification:a.version!==a.latestVersion&&1}],[{name:s("APPS.SETTINGS.DATE_TIME"),options:[[{name:s("APPS.SETTINGS.24_HOUR_TIME"),switch:!0,value:!a.time.twelveHourClock,id:"twelveHourClock",onChange:()=>{t.set({...t.value,time:{...a.time,twelveHourClock:!a.time.twelveHourClock}})}}],[{name:s("APPS.SETTINGS.SET_AUTOMATICALLY"),switch:!0,value:!0,disabled:!0},{name:s("APPS.SETTINGS.TIME_ZONE"),value:Intl.DateTimeFormat().resolvedOptions().timeZone??"Unknown"}]]},{name:s("APPS.SETTINGS.LANGUAGE_REGION"),options:[[{name:s("APPS.SETTINGS.LANGUAGE"),value:s("LABEL"),options:e(Ne,{type:"Language"})}]]}],[{name:s("APPS.SETTINGS.RESET_POPUP.TITLE"),onClick:()=>{w.PopUp.set({title:s("APPS.SETTINGS.RESET_POPUP.TITLE"),description:s("APPS.SETTINGS.RESET_POPUP.TEXT"),buttons:[{title:s("APPS.SETTINGS.RESET_POPUP.CANCEL")},{title:s("APPS.SETTINGS.RESET_POPUP.CONFIRM"),color:"red",cb:()=>b("factoryReset")}]})}}]]},{name:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS"),description:s("APPS.SETTINGS.DISPLAY_BRIGHTNESS_DESCRIPTION"),icon:e(te,{className:"blue"}),options:e(Se,{})},{name:s("APPS.SETTINGS.WALLPAPER"),description:s("APPS.SETTINGS.WALLPAPER_DESCRIPTION"),icon:e(le,{className:"lightblue"}),options:e(he,{})},{name:s("APPS.SETTINGS.BATTERY"),description:s("APPS.SETTINGS.BATTERY_DESCRIPTION"),icon:e(ce,{className:"green"})}]];const u=v.useRef(!0),N=v.useRef(!1);return v.useEffect(()=>{if(u.current){u.current=!1;return}O("info","Settings changes detected",t.value),N!=null&&N.current||(O("info","Settings","Changes detected, changing state",t.value),N.current=!0)},[a]),v.useEffect(()=>()=>{N!=null&&N.current&&(O("info","Settings","Changes detected, saving settings",t.value),b("setSettings",t.value),N.current=!1)},[l==null?void 0:l.active]),i("div",{className:"settings-container",children:[i("div",{className:"settings-sidebar",children:[e("div",{className:"settings-header",children:e("div",{className:"title",children:s("APPS.SETTINGS.TITLE")})}),i("div",{className:"settings-content",children:[e(re,{placeholder:s("SEARCH"),onChange:I=>r(I.target.value)}),i("div",{className:"profile",children:[e("div",{className:"avatar",children:"LB"}),i("div",{className:"profile-info",children:[e("div",{className:"name",children:"LB"}),e("div",{className:"info",children:s("APPS.SETTINGS.CLOUD_BACKUP")})]}),e(k,{className:"chevron"})]}),g.map((I,A)=>e("section",{"data-last":A===g.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(m(n.options),h(n.name),T.reset())},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),i("div",{className:"setting-info",children:[e("div",{className:"title",children:n.name}),n.description&&e("div",{className:"description",children:n.description})]})]}),n.notification&&e("div",{className:"settings-notification",children:n.notification}),i("div",{className:"setting-value",children:[n.switch&&e(C,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(k,{className:"chevron"})]})]},f))},A))]})]}),i("main",{className:"settings-body",children:[i("div",{className:"settings-header",children:[e("div",{className:"back",onClick:()=>{var I,A,n,f;(I=o==null?void 0:o[o.length-1])!=null&&I.page&&(m((A=o==null?void 0:o[o.length-1])==null?void 0:A.page),h((n=o==null?void 0:o[o.length-1])==null?void 0:n.name)),(f=o==null?void 0:o[o.length-1])!=null&&f.name?(window.postMessage({action:"settings:back"}),h(null),T.set(T.value.slice(0,T.value.length-1))):(m(null),h(null))},children:(((E=o==null?void 0:o[o.length-1])==null?void 0:E.name)||c)&&i(P,{children:[e(oe,{}),((R=o==null?void 0:o[o.length-1])==null?void 0:R.name)??s("APPS.SETTINGS.TITLE")]})}),e("div",{className:"title",children:d??""}),e("div",{})]}),c&&e(L.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{duration:.2},className:"settings-content",children:v.isValidElement(c)?c:c.map((I,A)=>e("section",{"data-last":A===g.length-1,children:I.map((n,f)=>i("div",{className:"settings-item","data-clickable":!!(n.options||n.onClick),onClick:()=>{if(n.onClick)return n.onClick();n.options&&(m(n.options),h(n.name),T.set([...T.value,{name:d,page:c}]))},children:[i("div",{className:"setting",children:[n.icon&&(typeof n.icon=="string"?e("img",{src:n.icon}):n.icon),e("div",{className:"title",children:n.name})]}),n.notification&&e("div",{className:"settings-notification",children:"1"}),i("div",{className:"setting-value",children:[n.switch&&e(C,{onChange:n.onChange,checked:n.value,disabled:n.disabled??!1}),n.value&&!n.switch&&e("div",{className:"value",children:n.value}),n.options&&e(k,{className:"chevron"})]})]},f))},A))},d)]})]})}export{Ie as Header,T as SettingsHistory,Ae as default};
