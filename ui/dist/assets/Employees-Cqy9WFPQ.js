import{u as O,r as c,k as C,bH as u,J as E,n as S,j as a,o as k,a as r,L as o,K as L,bs as x,bp as T,bF as I,i as A,b2 as R,O as j}from"./index-BmPcK3sZ.js";const m=j([]);function w(){var h,p;const N=O(m),[f,b]=c.useState([]),[l,v]=c.useState({}),[d,P]=c.useState("police"),[n,g]=c.useState("");return c.useEffect(()=>{C("Police",{action:"getEmployees"},{employees:u.employees,ranks:u.ranks,labels:u.labels}).then(e=>{if(!e)return E("warning","No employees returned from server");m.set(e.employees),b(e.ranks),v(e.labels),P(Object.keys(e.labels)[0])})},[]),S("police:updateCallsign",e=>{if(!e)return E("error","No data received for police:updateCallsign");m.set(i=>{const s=i.findIndex(t=>t.id===e.identifier);return s===-1?i:(i[s].callsign=e.callsign,[...i])})}),a(k.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main offences",children:r("div",{className:"page",children:[r("div",{className:"top",children:[a("div",{className:"title",children:o("APPS.POLICE.EMPLOYEES.TITLE")}),Object.keys(l).length>1&&a("div",{className:"selector",children:Object.keys(l).sort((e,i)=>l[e].localeCompare(l[i])).map(e=>a("div",{className:"option","data-active":d===e,onClick:()=>P(e),children:l[e]},e))})]}),a(L,{placeholder:o("APPS.POLICE.EMPLOYEES.SEARCH"),onChange:e=>g(e.target.value)}),a("div",{className:"items",children:(p=(h=f[d])==null?void 0:h.sort((e,i)=>i.grade-e.grade))==null?void 0:p.map(e=>{if(N.filter(s=>{var t;return s.rank===e.grade&&s.job===d&&((t=s==null?void 0:s.name)==null?void 0:t.toLowerCase().includes(n==null?void 0:n.toLowerCase()))}).length>0)return r("div",{className:"grid-item",children:[a("div",{className:"top",children:a("div",{className:"title",children:e.label})}),a("div",{className:"items",style:{padding:"0 0.5rem"},children:N.filter(s=>s.rank===e.grade&&s.job===d).filter(s=>{var t;return(t=s==null?void 0:s.name)==null?void 0:t.toLowerCase().includes(n==null?void 0:n.toLowerCase())}).map((s,t)=>r("div",{className:"item profile",children:[a("div",{className:x("status",s.onDuty?"online":"offline")}),a("img",{src:T(s.avatar,"profile")}),r("div",{className:"info",children:[a("div",{className:"name",children:s.name}),a("div",{className:"subtitle",children:s.callsign}),s.phoneNumber&&a("div",{className:"phone",onClick:()=>{I(s.phoneNumber),A.PopUp.set({title:o("COMPONENTS.SHARE.COPY_POPUP.TITLE"),description:o("COMPONENTS.SHARE.COPY_POPUP.DESCRIPTION"),buttons:[{title:o("COMPONENTS.SHARE.COPY_POPUP.OK")}]})},children:R(s.phoneNumber)})]})]},t))})]},e.grade)})})]})})})}export{w as default};
