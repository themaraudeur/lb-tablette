import{u as T,r as S,a as n,j as e,L as r,g as B,o as p,F as b,aJ as U,i as Z,k as R,aK as v,s as j,b as K,J as _,S as M,aL as F,aM as J,A as Y,aN as z,aO as Q,h as q,am as G,p as x,N as X,I as ee,O as te,P as ie,Q as le,aP as ne,aQ as re,aR as ae}from"./index-BmPcK3sZ.js";function ce(){const t=T(M),[s,d]=S.useState(!1),c=T(v.Alarms),o=l=>{let i=l.hour,m=l.minute;t.time.twelveHourClock&&(i>12?i=i-12:i===0&&(i=12));let h,A;return i<10?h=`0${i}`:h=`${i}`,m<10?A=`0${m}`:A=`${m}`,t.time.twelveHourClock?`${h}:${A} ${l.hour>12?"PM":"AM"}`:`${h}:${A}`};return n("div",{className:"alarm-container",children:[n("div",{className:"alarm-header",children:[n("div",{className:"alarm-header-top",children:[e("div",{className:"edit",onClick:()=>d(!s),children:s?r("APPS.CLOCK.ALARM.DONE"):r("APPS.CLOCK.ALARM.EDIT")}),e(B,{onClick:()=>w.set("NewAlarm")})]}),e("div",{className:"alarm-title",children:r("APPS.CLOCK.ALARM.TITLE")})]}),e("div",{className:"alarm-content",children:c.sort((l,i)=>l.hours===i.hours?l.minutes-i.minutes:l.hours-i.hours).map((l,i)=>e(p.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"alarm","data-active":l.enabled,children:s?n(b,{children:[n("div",{className:"alarm-wrapper",children:[e(U,{onClick:()=>{Z.PopUp.set({title:r("APPS.CLOCK.ALARM.DELETE_TITLE"),description:r("APPS.CLOCK.ALARM.DELETE_TEXT"),buttons:[{title:r("APPS.CLOCK.ALARM.BUTTON_CANCEL")},{title:r("APPS.CLOCK.ALARM.BUTTON_DELETE"),color:"red",cb:()=>{R("Clock",{action:"deleteAlarm",id:l.id},!0).then(()=>{v.Alarms.set(c.filter(m=>m.id!==l.id))})}}]})}}),n("div",{className:"alarm-info",children:[e("div",{className:"time",children:o({hour:l.hours,minute:l.minutes})}),e("div",{className:"label",children:l.label??r("APPS.CLOCK.ALARM.TITLE")})]})]}),e(j,{})]}):n(b,{children:[n("div",{className:"alarm-info",children:[e("div",{className:"time",children:o({hour:l.hours,minute:l.minutes})}),e("div",{className:"label",children:l.label??r("APPS.CLOCK.ALARM.TITLE")})]}),e(K,{checked:l.enabled,onChange:()=>{R("Clock",{action:"toggleAlarm",id:l.id,enabled:!l.enabled},!0).then(m=>{if(m===void 0)return _("error","Failed to toggle alarm");v.Alarms.set(c.map((h,A)=>(A===i&&(h.enabled=!h.enabled),h)))})}})]})},i))})]})}function E(t){let s=t.disabled,d=t.active;return e("div",{className:"button","data-active":d,"data-disabled":s,children:e("div",{className:"button-inner",style:{fontSize:t.content.length>7?"0.75rem":"0.9rem"},onClick:()=>t.onClick(),children:t.content})})}function se(){const t=T(v.Stopwatch);return n("div",{className:"stopwatch-container",children:[e("div",{className:"stopwatch-header",children:e("div",{className:"stopwatch-title",children:r("APPS.CLOCK.STOPWATCH.TITLE")})}),n("div",{className:"stopwatch-content",children:[e("div",{className:"clock",children:O(t.time,!0)}),n("div",{className:"actions",children:[e(E,{content:t.running||!t.running&&t.time==0?r("APPS.CLOCK.STOPWATCH.LAP"):r("APPS.CLOCK.STOPWATCH.RESET"),disabled:!t.running&&t.time===0,onClick:()=>{!t.running&&t.time!==0?v.Stopwatch.set({running:!1,time:0,laps:[]}):t.time>0&&v.Stopwatch.set({...t,laps:[...t.laps,t.time]})}}),e(E,{active:t.running,content:t.running?r("APPS.CLOCK.STOPWATCH.STOP"):r("APPS.CLOCK.STOPWATCH.START"),onClick:()=>v.Stopwatch.set({...t,running:!t.running})})]}),e("div",{className:"laps","data-empty":t.laps.length===0,children:n("table",{style:{borderSpacing:`${t.laps.length===0?"3.5rem":"2.6rem"} 1rem`},children:[e("thead",{children:n("tr",{children:[e("th",{children:r("APPS.CLOCK.STOPWATCH.LAP")}),e("th",{children:r("APPS.CLOCK.STOPWATCH.TIME")}),e("th",{children:r("APPS.CLOCK.STOPWATCH.TOTAL")})]})}),n("tbody",{children:[t.laps.length===0&&e("tr",{children:e("td",{className:"no-laps",colSpan:3,children:r("APPS.CLOCK.STOPWATCH.NO_LAPS")})}),(()=>{if(t.laps.length===0)return null;const s=t.laps.map((o,l)=>l===0?o:o-t.laps[l-1]),d=s.indexOf(Math.min(...s)),c=s.indexOf(Math.max(...s));return t.laps.map((o,l)=>{const i=l===d,m=l===c;return n(p.tr,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},"data-best":i,"data-worst":m,children:[e("td",{children:l+1}),e("td",{children:O(l===0?o:o-t.laps[l-1],!0)}),e("td",{children:O(o,!0)})]},o)})})()]})]})})]})]})}function oe(){const t=T(q),s=T(M),d=T(G.Visible),c=T(v.Timer),[o,l]=S.useState([]),[i,m]=S.useState({hours:0,minutes:0,seconds:0}),h=S.useRef(null),A=S.useRef(null),f=S.useRef(null),[L,y]=S.useState(null);S.useEffect(()=>{let a=new Date(Date.now()+c.time*1e3);y(a.toLocaleTimeString(t==null?void 0:t.DateLocale,{hour:"numeric",minute:"numeric",hour12:s.time.twelveHourClock}));let u=localStorage.getItem("recent-timers");l(u?JSON.parse(u):[])},[]);const $=a=>{if(a||(a=i.hours*3600+i.minutes*60+i.seconds),a>0){v.Timer.set({running:!0,time:a});let u=new Date(Date.now()+a*1e3);y(u.toLocaleTimeString(t==null?void 0:t.DateLocale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}));let C=[a,...o.filter(P=>P!==a)];C.length>5&&C.shift(),localStorage.setItem("recent-timers",JSON.stringify(C)),l(C)}},I=(a,u)=>{const P=document.querySelector(`#${u}`).querySelector(".active");let N=a.deltaY>0?P.nextElementSibling:P.previousElementSibling;N==null||N.click()},D=S.useRef(!0);return S.useEffect(()=>{var a,u,C;if(D.current){D.current=!1;return}if(!c.running&&(v.Timer.set({running:!1,time:0}),d)){let P=(a=h.current)==null?void 0:a.querySelector(".active"),N=(u=A.current)==null?void 0:u.querySelector(".active"),k=(C=f.current)==null?void 0:C.querySelector(".active");P&&(P==null||P.scrollIntoView({block:"center"})),N&&(N==null||N.scrollIntoView({block:"center"})),k&&(k==null||k.scrollIntoView({block:"center"}))}},[c.running]),n("div",{className:"timer-container",children:[e("div",{className:"timer-header",children:e("div",{className:"timer-title",children:r("APPS.CLOCK.TIMER.TITLE")})}),n("div",{className:"timer-content",children:[c.running?e(b,{children:n("div",{className:"timer-wrapper",children:[e("div",{className:"border-wrapper",children:e(F,{value:c.time/(i.hours*3600+i.minutes*60+i.seconds)*100,strokeWidth:4,styles:J({strokeLinecap:"butt",pathColor:"#348DE9",trailColor:s.display.theme==="light"?"#AAAAAA":"#303030",pathTransitionDuration:.5})})}),n("div",{className:"timer",children:[e("div",{className:"timer-text",children:O(c.time,!1)}),L&&n("div",{className:"when-done",children:[e(Y,{}),L]})]})]})}):n(b,{children:[n("div",{className:"picker-labels",children:[e("div",{children:r("APPS.CLOCK.TIMER.HOURS")}),e("div",{children:r("APPS.CLOCK.TIMER.MINUTES")}),e("div",{children:r("APPS.CLOCK.TIMER.SECONDS")})]}),n("div",{className:"picker",children:[e("div",{ref:h,children:n("ul",{id:"hours",onWheel:a=>{I(a,"hours")},children:[e("li",{}),[...Array(24).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),m({...i,hours:a})},className:i.hours===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{ref:A,children:n("ul",{id:"minutes",onWheel:a=>{I(a,"minutes")},children:[e("li",{}),[...Array(60).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),m({...i,minutes:a})},className:i.minutes===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{ref:f,children:n("ul",{id:"seconds",onWheel:a=>{I(a,"seconds")},children:[e("li",{}),[...Array(60).keys()].map((a,u)=>e("li",{onClick:C=>{C.target.scrollIntoView({block:"center",behavior:"smooth"}),m({...i,seconds:a})},className:i.seconds===a?"active":"",children:a},u)),e("li",{})]})}),e("div",{className:"selected"})]})]}),n("div",{className:"actions",children:[e(E,{content:r("APPS.CLOCK.TIMER.CANCEL"),disabled:!c.running,onClick:()=>{c.running&&v.Timer.set({running:!1,time:0})}}),e(E,{content:c.running?r("APPS.CLOCK.TIMER.STOP"):r("APPS.CLOCK.TIMER.START"),active:c.running,onClick:()=>c.running?v.Timer.set({...c,running:!1}):$()})]}),!c.running&&n("div",{className:"recents",children:[e("div",{className:"title",children:"Recents"}),n("div",{className:"recents-wrapper","data-empty":o.length===0,children:[o.length===0&&e("div",{className:"no-recents",children:r("APPS.CLOCK.TIMER.NO_RECENTS")}),o.map((a,u)=>n(p.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"item",children:[e("div",{className:"time",children:O(a)}),n("div",{className:"buttons",children:[e(z,{className:"red",onClick:()=>{let C=o.filter((P,N)=>N!==u);localStorage.setItem("recent-timers",JSON.stringify(C)),l(C)}}),e(Q,{className:"green",onClick:()=>$(a)})]})]},u))]})]})]})]})}function de(){const t=T(q),s=T(M),d=t.WorldClockLocations,c=l=>new Date().toLocaleTimeString(t.DateLocale,{timeZone:d[l],hour:"2-digit",minute:"2-digit",hour12:s.time.twelveHourClock}),o=l=>{const i=new Date;let m=i.toLocaleTimeString([],{hour:"2-digit",hour12:!1}),h=i.toLocaleDateString([],{day:"numeric"}),A=i.toLocaleTimeString([],{hour:"2-digit",hour12:!1,timeZone:d[l]}),f=i.toLocaleDateString([],{day:"numeric",timeZone:d[l]}),L=parseInt(A)-parseInt(m);return L===0?"Local time":f>h?`${r("APPS.CLOCK.WORLDCLOCK.TOMORROW")} ${L>0?"+":""}${L}HRS`:f<h?`${r("APPS.CLOCK.WORLDCLOCK.YESTERDAY")} ${L>0?"-":""}${L}HRS`:`${r("APPS.CLOCK.WORLDCLOCK.TODAY")} ${L>0?"+":""}${L}HRS`};return n("div",{className:"worldclock-container",children:[e("div",{className:"worldclock-header",children:e("div",{className:"worldclock-title",children:r("APPS.CLOCK.WORLDCLOCK.TITLE")})}),e("div",{className:"worldclock-content",children:Object.keys(d).map((l,i)=>n(p.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"worldclock",children:[n("div",{className:"worldclock-location",children:[e("div",{className:"location",children:l}),e("div",{className:"difference",children:o(l)})]}),e("div",{className:"time",children:c(l)})]},i))})]})}function me(){const[t,s]=S.useState(""),[d,c]=S.useState({hour:0,minute:0}),o=()=>{let i={label:t&&t.length>0?t:null,minutes:d.minute,hours:d.hour};R("Clock",{action:"createAlarm",...i},{id:Math.floor(Math.random()*1e3)+1}).then(m=>{if(!m)return _("error","Failed to create alarm");v.Alarms.set([...v.Alarms.value,{...i,id:m.id,enabled:!0}]),w.set("Alarm")})},l=(i,m)=>{const A=document.querySelector(`#${m}`).querySelector(".active");let f=i.deltaY>0?A.nextElementSibling:A.previousElementSibling;f==null||f.click()};return n(p.div,{...x("left","new-alarm",.2),className:"new-alarm-container",children:[n("div",{className:"new-alarm-header",children:[n("div",{className:"cancel",onClick:()=>w.set("Alarm"),children:[e(X,{}),r("APPS.CLOCK.ALARM.ALARMS")]}),n("div",{className:"title",children:[" ",r("APPS.CLOCK.ALARM.NEW_ALARM")]}),e("div",{className:"save",onClick:()=>o(),children:r("APPS.CLOCK.ALARM.SAVE")})]}),n("div",{className:"new-alarm-content",children:[n("div",{className:"picker alarm",children:[e("div",{children:n("ul",{id:"hour",onWheel:i=>{l(i,"hour")},children:[e("li",{}),[...Array(24).keys()].map((i,m)=>n("li",{onClick:h=>{h.target.classList.contains("active")||(h.target.scrollIntoView({block:"center",behavior:"smooth"}),c({...d,hour:i}))},className:d.hour===i?"active":"",children:[i<10?`0${i}`:i," "]},m)),e("li",{})]})}),e("div",{className:"separator",children:":"}),e("div",{children:n("ul",{id:"minute",onWheel:i=>{l(i,"minute")},children:[e("li",{}),[...Array(60).keys()].map((i,m)=>e("li",{className:d.minute===i?"active":"",onClick:h=>{h.target.classList.contains("active")||(h.target.scrollIntoView({block:"center",behavior:"smooth"}),c({...d,minute:i}))},children:i<10?`0${i}`:i},m)),e("li",{})]})}),e("div",{className:"selected"})]}),n("div",{className:"settings",children:[n("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.LABEL")}),e(ee,{type:"text",placeholder:r("APPS.CLOCK.ALARM.TITLE"),onChange:i=>s(i.target.value)})]}),n("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.SOUND")}),e(K,{disabled:!0,checked:!0})]}),n("div",{className:"item",children:[e("div",{className:"label",children:r("APPS.CLOCK.ALARM.SNOOZE")}),e(K,{disabled:!0,checked:!1})]})]})]})]})}var W,H,V;const w=te(((V=(H=(W=ie.value)==null?void 0:W.active)==null?void 0:H.data)==null?void 0:V.view)??"Timer");let g={"World Clock":{icon:e(le,{}),title:r("APPS.CLOCK.WORLDCLOCK.TITLE"),view:e(de,{})},Alarm:{icon:e(ne,{}),title:r("APPS.CLOCK.ALARM.TITLE"),view:e(ce,{})},Stopwatch:{icon:e(re,{}),title:r("APPS.CLOCK.STOPWATCH.TITLE"),view:e(se,{})},Timer:{icon:e(ae,{}),title:r("APPS.CLOCK.TIMER.TITLE"),view:e(oe,{})},NewAlarm:{title:r("APPS.CLOCK.ALARM.NEW_ALARM"),view:e(me,{}),hidden:!0}};function ue(){const t=T(w);return n("div",{className:"clock-container",children:[e(p.div,{...x(t==="NewAlarm"?"right":"left",t,.2),className:"clock-body",children:g[t].view})," ",e("div",{className:"clock-footer",children:Object.keys(g).filter(s=>!g[s].hidden).map((s,d)=>{var o,l,i;let c=t==s||t=="NewAlarm"&&s=="Alarm";return n("div",{"data-active":c,style:{fontSize:((o=g[s])==null?void 0:o.title.length)>10?"0.75rem":"0.8rem"},onClick:()=>w.set(s),children:[(l=g[s])==null?void 0:l.icon,(i=g[s])==null?void 0:i.title]},d)})})]})}const O=(t,s)=>{if(s){let d=t%100,c=Math.floor(t/100)%60,o=Math.floor(t/6e3)%60,l=Math.floor(t/36e4)%24;return l>0?`${l.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${d.toString().padStart(2,"0")}`:`${o.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}.${d.toString().padStart(2,"0")}`}else{let d=t%60,c=Math.floor(t/60)%60;return`${(Math.floor(t/3600)%24).toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}},Ce=t=>{t&&t.scrollIntoView({behavior:"smooth",block:"center"})};export{w as View,ue as default,O as formatTime,Ce as snapElement};
