import{u as p,r as c,k as O,bw as u,J as P,n as S,j as a,o as A,a as r,L as o,K as k,bs as L,bE as x,bF as T,i as M,b2 as R,O as j}from"./index-BmPcK3sZ.js";const m=j([]);function I(){var h,E;const N=p(m),[f,v]=c.useState([]),[l,g]=c.useState({}),[d,b]=c.useState("ambulance"),[n,C]=c.useState("");return c.useEffect(()=>{O("Ambulance",{action:"getEmployees"},{employees:u.employees,ranks:u.ranks,labels:u.labels}).then(e=>{if(!e)return P("warning","No employees returned from server");m.set(e.employees),v(e.ranks),g(e.labels),b(Object.keys(e.labels)[0])})},[]),S("ambulance:updateCallsign",e=>{if(!e)return P("error","No data received for police:updateCallsign");m.set(t=>{const s=t.findIndex(i=>i.id===e.identifier);return s===-1?t:(t[s].callsign=e.callsign,[...t])})}),a(A.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main offences",children:r("div",{className:"page",children:[r("div",{className:"top",children:[a("div",{className:"title",children:o("APPS.AMBULANCE.EMPLOYEES.TITLE")}),Object.keys(l).length>1&&a("div",{className:"selector",children:Object.keys(l).sort((e,t)=>l[e].localeCompare(l[t])).map(e=>a("div",{className:"option","data-active":d===e,onClick:()=>b(e),children:l[e]},e))})]}),a(k,{placeholder:o("APPS.AMBULANCE.EMPLOYEES.SEARCH"),onChange:e=>C(e.target.value)}),a("div",{className:"items",children:(E=(h=f[d])==null?void 0:h.sort((e,t)=>t.grade-e.grade))==null?void 0:E.map(e=>{if(N.filter(s=>{var i;return s.rank===e.grade&&s.job===d&&((i=s==null?void 0:s.name)==null?void 0:i.toLowerCase().includes(n==null?void 0:n.toLowerCase()))}).length>0)return r("div",{className:"grid-item",children:[a("div",{className:"top",children:a("div",{className:"title",children:e.label})}),a("div",{className:"items",style:{padding:"0 0.5rem"},children:N.filter(s=>s.rank===e.grade&&s.job===d).filter(s=>{var i;return(i=s==null?void 0:s.name)==null?void 0:i.toLowerCase().includes(n==null?void 0:n.toLowerCase())}).map((s,i)=>r("div",{className:"item profile",children:[a("div",{className:L("status",s.onDuty?"online":"offline")}),a("img",{src:x(s.avatar)}),r("div",{className:"info",children:[a("div",{className:"name",children:s.name}),a("div",{className:"subtitle",children:s.callsign}),s.phoneNumber&&a("div",{className:"phone",onClick:()=>{T(s.phoneNumber),M.PopUp.set({title:o("COMPONENTS.SHARE.COPY_POPUP.TITLE"),description:o("COMPONENTS.SHARE.COPY_POPUP.DESCRIPTION"),buttons:[{title:o("COMPONENTS.SHARE.COPY_POPUP.OK")}]})},children:R(s.phoneNumber)})]})]},i))})]},e.grade)})})]})})})}export{I as default};
