import{u as O,r as l,L as n,k as p,bw as g,J as i,a2 as I,j as a,o as v,a as s,K as y,bu as k,bE as D,c as S,bs as m,aa as T,O as C,bx as x,by as N,bG as w}from"./index-BmPcK3sZ.js";const d=C([]);function R(){const u=O(d),[h,P]=l.useState(""),[b,E]=l.useState("");l.useState({});let f={create:{label:n("APPS.POLICE.LOGS.CREATED"),color:"green"},update:{label:n("APPS.POLICE.LOGS.UPDATED"),color:"orange"},delete:{label:n("APPS.POLICE.LOGS.DELETED"),color:"red"}};l.useEffect(()=>{const e=setTimeout(()=>P(b),500);return()=>clearTimeout(e)},[b]),l.useEffect(()=>{p("Ambulance",{action:"getLogs",query:h},g.logs).then(e=>{if(!e)return i("warning","No logs found");d.set(e)})},[h]);const{handleScroll:L}=I({fetchData:()=>p("Ambulance",{action:"getLogs",query:h,lastId:u[u.length-1].id}),onDataFetched:e=>d.set([...d.value,...e]),perPage:10}),c={report:{action:"getReport",mock:g.reports,cb:e=>{x.set(e),N.set("reports")}},profile:{action:"fetchProfile",mock:g.profiles,cb:e=>{w.set(e),N.set("journals")}}},A=(e,t)=>{var r;if(!e||!t)return i("warning","No type or id provided");p("Ambulance",{action:c[e].action,id:t},(r=c[e])==null?void 0:r.mock.find(o=>o.id===t)).then(o=>{if(!o)return i("warning","No data found");c[e].cb(o)})};return a(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{ease:"easeInOut",duration:.25},className:"policepage-container",children:a("main",{className:"main profiles",children:s("div",{className:"page",children:[a("div",{className:"top",children:a("div",{className:"title",children:n("APPS.POLICE.LOGS.TITLE")})}),a(y,{placeholder:"Search",onChange:e=>E(e.target.value)}),a("div",{className:"items",onScroll:L,children:u.map((e,t)=>{var r;return s(v.div,{...k,className:"item","data-clickable":"false",children:[a("img",{src:D(e.avatar)}),s("div",{className:"info",children:[s("div",{className:"name",children:[S(e.type),' - "',e.title,'"']}),e.description&&a("div",{className:"subtitle",children:e.description.substring(0,150)}),s("div",{className:"cards",children:[a("div",{className:m("card",f[e.action].color),children:f[e.action].label}),e.action!=="delete"&&(c==null?void 0:c[e.type])&&a("div",{className:m("card blue clickable"),onClick:()=>{if(e.action!=="delete"){if(!e.type||!e.relatedId)return i("warning","No type or id provided");A(e.type,e.relatedId)}},children:n("APPS.POLICE.LOGS.VIEW_FOOTER",{type:S(e.type),id:(r=e==null?void 0:e.relatedId)==null?void 0:r.toString()})})]}),s("div",{className:"id",children:[a("div",{className:"label",children:e.username}),a("div",{children:" - "}),a("div",{className:"value",children:T(e.timestamp)})]})]})]},t)})})]})})})}export{R as default};
